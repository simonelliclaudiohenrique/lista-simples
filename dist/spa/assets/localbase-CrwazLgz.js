import{i as Hr,r as ue,o as Le,w as se,a as Y,g as Se,a7 as Zr,e as Wt,a8 as Gr,b as Ve,a9 as Xr,R as Jt,a6 as en,d as be,Q as tn,aa as rn,h as Z,ab as De,ac as nn,Y as on,ad as an,W as ln,c as ut,ae as It,af as un}from"./index-DvVnWaeK.js";import{c as kt,h as xe}from"./QBtn-B0-92AL-.js";let Ze,Te=0;const ae=new Array(256);for(let e=0;e<256;e++)ae[e]=(e+256).toString(16).substring(1);const sn=(()=>{const e=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return o=>{const u=new Uint8Array(o);return e.getRandomValues(u),u}}return o=>{const u=[];for(let s=o;s>0;s--)u.push(Math.floor(Math.random()*256));return u}})(),At=4096;function at(){(Ze===void 0||Te+16>At)&&(Te=0,Ze=sn(At));const e=Array.prototype.slice.call(Ze,Te,Te+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,ae[e[0]]+ae[e[1]]+ae[e[2]]+ae[e[3]]+"-"+ae[e[4]]+ae[e[5]]+"-"+ae[e[6]]+ae[e[7]]+"-"+ae[e[8]]+ae[e[9]]+"-"+ae[e[10]]+ae[e[11]]+ae[e[12]]+ae[e[13]]+ae[e[14]]+ae[e[15]]}function fn(e){return e??null}function Bt(e,o){return e??(o===!0?`f_${at()}`:null)}function cn({getValue:e,required:o=!0}={}){if(Hr.value===!0){const u=e!==void 0?ue(fn(e())):ue(null);return o===!0&&u.value===null&&Le(()=>{u.value=`f_${at()}`}),e!==void 0&&se(e,s=>{u.value=Bt(s,o)}),u}return e!==void 0?Y(()=>Bt(e(),o)):ue(`f_${at()}`)}const Tt=/^on[A-Z]/;function dn(){const{attrs:e,vnode:o}=Se(),u={listeners:ue({}),attributes:ue({})};function s(){const d={},f={};for(const m in e)m!=="class"&&m!=="style"&&Tt.test(m)===!1&&(d[m]=e[m]);for(const m in o.props)Tt.test(m)===!0&&(f[m]=o.props[m]);u.attributes.value=d,u.listeners.value=f}return Zr(s),s(),u}const Ht={dark:{type:Boolean,default:null}};function Zt(e,o){return Y(()=>e.dark===null?o.dark.isActive:e.dark)}function hn({validate:e,resetValidation:o,requiresQForm:u}){const s=Wt(Gr,!1);if(s!==!1){const{props:d,proxy:f}=Se();Object.assign(f,{validate:e,resetValidation:o}),se(()=>d.disable,m=>{m===!0?(typeof o=="function"&&o(),s.unbindComponent(f)):s.bindComponent(f)}),Le(()=>{d.disable!==!0&&s.bindComponent(f)}),Ve(()=>{d.disable!==!0&&s.unbindComponent(f)})}else u===!0&&console.error("Parent QForm not found on useFormChild()!")}const Mt=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,Ot=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,$t=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Me=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Oe=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,Ge={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>Mt.test(e),hexaColor:e=>Ot.test(e),hexOrHexaColor:e=>$t.test(e),rgbColor:e=>Me.test(e),rgbaColor:e=>Oe.test(e),rgbOrRgbaColor:e=>Me.test(e)||Oe.test(e),hexOrRgbColor:e=>Mt.test(e)||Me.test(e),hexaOrRgbaColor:e=>Ot.test(e)||Oe.test(e),anyColor:e=>$t.test(e)||Me.test(e)||Oe.test(e)},vn=[!0,!1,"ondemand"],mn={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>vn.includes(e)}};function gn(e,o){const{props:u,proxy:s}=Se(),d=ue(!1),f=ue(null),m=ue(!1);hn({validate:K,resetValidation:q});let v=0,E;const I=Y(()=>u.rules!==void 0&&u.rules!==null&&u.rules.length!==0),T=Y(()=>u.disable!==!0&&I.value===!0&&o.value===!1),h=Y(()=>u.error===!0||d.value===!0),B=Y(()=>typeof u.errorMessage=="string"&&u.errorMessage.length!==0?u.errorMessage:f.value);se(()=>u.modelValue,()=>{m.value=!0,T.value===!0&&u.lazyRules===!1&&P()});function M(){u.lazyRules!=="ondemand"&&T.value===!0&&m.value===!0&&P()}se(()=>u.reactiveRules,X=>{X===!0?E===void 0&&(E=se(()=>u.rules,M,{immediate:!0,deep:!0})):E!==void 0&&(E(),E=void 0)},{immediate:!0}),se(()=>u.lazyRules,M),se(e,X=>{X===!0?m.value=!0:T.value===!0&&u.lazyRules!=="ondemand"&&P()});function q(){v++,o.value=!1,m.value=!1,d.value=!1,f.value=null,P.cancel()}function K(X=u.modelValue){if(u.disable===!0||I.value===!1)return!0;const $=++v,le=o.value!==!0?()=>{m.value=!0}:()=>{},ee=(A,N)=>{A===!0&&le(),d.value=A,f.value=N||null,o.value=!1},S=[];for(let A=0;A<u.rules.length;A++){const N=u.rules[A];let O;if(typeof N=="function"?O=N(X,Ge):typeof N=="string"&&Ge[N]!==void 0&&(O=Ge[N](X)),O===!1||typeof O=="string")return ee(!0,O),!1;O!==!0&&O!==void 0&&S.push(O)}return S.length===0?(ee(!1),!0):(o.value=!0,Promise.all(S).then(A=>{if(A===void 0||Array.isArray(A)===!1||A.length===0)return $===v&&ee(!1),!0;const N=A.find(O=>O===!1||typeof O=="string");return $===v&&ee(N!==void 0,N),N===void 0},A=>($===v&&(console.error(A),ee(!0)),!1)))}const P=Xr(K,0);return Ve(()=>{E?.(),P.cancel()}),Object.assign(s,{resetValidation:q,validate:K}),Jt(s,"hasError",()=>h.value),{isDirtyModel:m,hasRules:I,hasError:h,errorMessage:B,validate:K,resetValidation:q}}let we=[],Ie=[];function Gt(e){Ie=Ie.filter(o=>o!==e)}function to(e){Gt(e),Ie.push(e)}function ro(e){Gt(e),Ie.length===0&&we.length!==0&&(we[we.length-1](),we=[])}function Xt(e){Ie.length===0?e():we.push(e)}function yn(e){we=we.filter(o=>o!==e)}function lt(e){return e!=null&&(""+e).length!==0}const pn={...Ht,...mn,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},bn={...pn,maxlength:[Number,String]},wn=["update:modelValue","clear","focus","blur"];function _n({requiredForAttr:e=!0,tagProp:o,changeEvent:u=!1}={}){const{props:s,proxy:d}=Se(),f=Zt(s,d.$q),m=cn({required:e,getValue:()=>s.for});return{requiredForAttr:e,changeEvent:u,tag:o===!0?Y(()=>s.tag):{value:"label"},isDark:f,editable:Y(()=>s.disable!==!0&&s.readonly!==!0),innerLoading:ue(!1),focused:ue(!1),hasPopupOpen:!1,splitAttrs:dn(),targetUid:m,rootRef:ue(null),targetRef:ue(null),controlRef:ue(null)}}function Sn(e){const{props:o,emit:u,slots:s,attrs:d,proxy:f}=Se(),{$q:m}=f;let v=null;e.hasValue===void 0&&(e.hasValue=Y(()=>lt(o.modelValue))),e.emitValue===void 0&&(e.emitValue=D=>{u("update:modelValue",D)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:y,onFocusout:p}),Object.assign(e,{clearValue:R,onControlFocusin:y,onControlFocusout:p,focus:N}),e.computedCounter===void 0&&(e.computedCounter=Y(()=>{if(o.counter!==!1){const D=typeof o.modelValue=="string"||typeof o.modelValue=="number"?(""+o.modelValue).length:Array.isArray(o.modelValue)===!0?o.modelValue.length:0,j=o.maxlength!==void 0?o.maxlength:o.maxValues;return D+(j!==void 0?" / "+j:"")}}));const{isDirtyModel:E,hasRules:I,hasError:T,errorMessage:h,resetValidation:B}=gn(e.focused,e.innerLoading),M=e.floatingLabel!==void 0?Y(()=>o.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):Y(()=>o.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),q=Y(()=>o.bottomSlots===!0||o.hint!==void 0||I.value===!0||o.counter===!0||o.error!==null),K=Y(()=>o.filled===!0?"filled":o.outlined===!0?"outlined":o.borderless===!0?"borderless":o.standout?"standout":"standard"),P=Y(()=>`q-field row no-wrap items-start q-field--${K.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(o.rounded===!0?" q-field--rounded":"")+(o.square===!0?" q-field--square":"")+(M.value===!0?" q-field--float":"")+($.value===!0?" q-field--labeled":"")+(o.dense===!0?" q-field--dense":"")+(o.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(T.value===!0?" q-field--error":"")+(T.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(o.hideBottomSpace!==!0&&q.value===!0?" q-field--with-bottom":"")+(o.disable===!0?" q-field--disabled":o.readonly===!0?" q-field--readonly":"")),X=Y(()=>"q-field__control relative-position row no-wrap"+(o.bgColor!==void 0?` bg-${o.bgColor}`:"")+(T.value===!0?" text-negative":typeof o.standout=="string"&&o.standout.length!==0&&e.focused.value===!0?` ${o.standout}`:o.color!==void 0?` text-${o.color}`:"")),$=Y(()=>o.labelSlot===!0||o.label!==void 0),le=Y(()=>"q-field__label no-pointer-events absolute ellipsis"+(o.labelColor!==void 0&&T.value!==!0?` text-${o.labelColor}`:"")),ee=Y(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:M.value,modelValue:o.modelValue,emitValue:e.emitValue})),S=Y(()=>{const D={};return e.targetUid.value&&(D.for=e.targetUid.value),o.disable===!0&&(D["aria-disabled"]="true"),D});function A(){const D=document.activeElement;let j=e.targetRef?.value;j&&(D===null||D.id!==e.targetUid.value)&&(j.hasAttribute("tabindex")===!0||(j=j.querySelector("[tabindex]")),j!==D&&j?.focus({preventScroll:!0}))}function N(){Xt(A)}function O(){yn(A);const D=document.activeElement;D!==null&&e.rootRef.value.contains(D)&&D.blur()}function y(D){v!==null&&(clearTimeout(v),v=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,u("focus",D))}function p(D,j){v!==null&&clearTimeout(v),v=setTimeout(()=>{v=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,u("blur",D)),j?.())})}function R(D){en(D),m.platform.is.mobile!==!0?(e.targetRef?.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),o.type==="file"&&(e.inputRef.value.value=null),u("update:modelValue",null),e.changeEvent===!0&&u("change",null),u("clear",o.modelValue),be(()=>{const j=E.value;B(),E.value=j})}function _(D){[13,32].includes(D.keyCode)&&R(D)}function F(){const D=[];return s.prepend!==void 0&&D.push(Z("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:De},s.prepend())),D.push(Z("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},L())),T.value===!0&&o.noErrorIcon===!1&&D.push(V("error",[Z(kt,{name:m.iconSet.field.error,color:"negative"})])),o.loading===!0||e.innerLoading.value===!0?D.push(V("inner-loading-append",s.loading!==void 0?s.loading():[Z(nn,{color:o.color})])):o.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&D.push(V("inner-clearable-append",[Z(kt,{class:"q-field__focusable-action",name:o.clearIcon||m.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":m.lang.label.clear,onKeyup:_,onClick:R})])),s.append!==void 0&&D.push(Z("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:De},s.append())),e.getInnerAppend!==void 0&&D.push(V("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&D.push(e.getControlChild()),D}function L(){const D=[];return o.prefix!==void 0&&o.prefix!==null&&D.push(Z("div",{class:"q-field__prefix no-pointer-events row items-center"},o.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&D.push(e.getShadowControl()),e.getControl!==void 0?D.push(e.getControl()):s.rawControl!==void 0?D.push(s.rawControl()):s.control!==void 0&&D.push(Z("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":o.autofocus===!0||void 0},s.control(ee.value))),$.value===!0&&D.push(Z("div",{class:le.value},xe(s.label,o.label))),o.suffix!==void 0&&o.suffix!==null&&D.push(Z("div",{class:"q-field__suffix no-pointer-events row items-center"},o.suffix)),D.concat(xe(s.default))}function G(){let D,j;T.value===!0?h.value!==null?(D=[Z("div",{role:"alert"},h.value)],j=`q--slot-error-${h.value}`):(D=xe(s.error),j="q--slot-error"):(o.hideHint!==!0||e.focused.value===!0)&&(o.hint!==void 0?(D=[Z("div",o.hint)],j=`q--slot-hint-${o.hint}`):(D=xe(s.hint),j="q--slot-hint"));const W=o.counter===!0||s.counter!==void 0;if(o.hideBottomSpace===!0&&W===!1&&D===void 0)return;const Q=Z("div",{key:j,class:"q-field__messages col"},D);return Z("div",{class:"q-field__bottom row items-start q-field__bottom--"+(o.hideBottomSpace!==!0?"animated":"stale"),onClick:De},[o.hideBottomSpace===!0?Q:Z(on,{name:"q-transition--field-message"},()=>Q),W===!0?Z("div",{class:"q-field__counter"},s.counter!==void 0?s.counter():e.computedCounter.value):null])}function V(D,j){return j===null?null:Z("div",{key:D,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},j)}let z=!1;return tn(()=>{z=!0}),rn(()=>{z===!0&&o.autofocus===!0&&f.focus()}),o.autofocus===!0&&Le(()=>{f.focus()}),Ve(()=>{v!==null&&clearTimeout(v)}),Object.assign(f,{focus:N,blur:O}),function(){const j=e.getControl===void 0&&s.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":o.autofocus===!0||void 0,...S.value}:S.value;return Z(e.tag.value,{ref:e.rootRef,class:[P.value,d.class],style:d.style,...j},[s.before!==void 0?Z("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:De},s.before()):null,Z("div",{class:"q-field__inner relative-position col self-stretch"},[Z("div",{ref:e.controlRef,class:X.value,tabindex:-1,...e.controlEvents},F()),q.value===!0?G():null]),s.after!==void 0?Z("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:De},s.after()):null])}}const Ft={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Pe={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},er=Object.keys(Pe);er.forEach(e=>{Pe[e].regex=new RegExp(Pe[e].pattern)});const Cn=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+er.join("")+"])|(.)","g"),qt=/[.*+?^${}()|[\]\\]/g,oe="",xn={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function En(e,o,u,s){let d,f,m,v,E,I;const T=ue(null),h=ue(M());function B(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}se(()=>e.type+e.autogrow,K),se(()=>e.mask,y=>{if(y!==void 0)P(h.value,!0);else{const p=N(h.value);K(),e.modelValue!==p&&o("update:modelValue",p)}}),se(()=>e.fillMask+e.reverseFillMask,()=>{T.value===!0&&P(h.value,!0)}),se(()=>e.unmaskedValue,()=>{T.value===!0&&P(h.value)});function M(){if(K(),T.value===!0){const y=S(N(e.modelValue));return e.fillMask!==!1?O(y):y}return e.modelValue}function q(y){if(y<d.length)return d.slice(-y);let p="",R=d;const _=R.indexOf(oe);if(_!==-1){for(let F=y-R.length;F>0;F--)p+=oe;R=R.slice(0,_)+p+R.slice(_)}return R}function K(){if(T.value=e.mask!==void 0&&e.mask.length!==0&&B(),T.value===!1){v=void 0,d="",f="";return}const y=Ft[e.mask]===void 0?e.mask:Ft[e.mask],p=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",R=p.replace(qt,"\\$&"),_=[],F=[],L=[];let G=e.reverseFillMask===!0,V="",z="";y.replace(Cn,(Q,C,te,ve,fe)=>{if(ve!==void 0){const ie=Pe[ve];L.push(ie),z=ie.negate,G===!0&&(F.push("(?:"+z+"+)?("+ie.pattern+"+)?(?:"+z+"+)?("+ie.pattern+"+)?"),G=!1),F.push("(?:"+z+"+)?("+ie.pattern+")?")}else if(te!==void 0)V="\\"+(te==="\\"?"":te),L.push(te),_.push("([^"+V+"]+)?"+V+"?");else{const ie=C!==void 0?C:fe;V=ie==="\\"?"\\\\\\\\":ie.replace(qt,"\\\\$&"),L.push(ie),_.push("([^"+V+"]+)?"+V+"?")}});const D=new RegExp("^"+_.join("")+"("+(V===""?".":"[^"+V+"]")+"+)?"+(V===""?"":"["+V+"]*")+"$"),j=F.length-1,W=F.map((Q,C)=>C===0&&e.reverseFillMask===!0?new RegExp("^"+R+"*"+Q):C===j?new RegExp("^"+Q+"("+(z===""?".":z)+"+)?"+(e.reverseFillMask===!0?"$":R+"*")):new RegExp("^"+Q));m=L,v=Q=>{const C=D.exec(e.reverseFillMask===!0?Q:Q.slice(0,L.length+1));C!==null&&(Q=C.slice(1).join(""));const te=[],ve=W.length;for(let fe=0,ie=Q;fe<ve;fe++){const ge=W[fe].exec(ie);if(ge===null)break;ie=ie.slice(ge.shift().length),te.push(...ge)}return te.length!==0?te.join(""):Q},d=L.map(Q=>typeof Q=="string"?Q:oe).join(""),f=d.split(oe).join(p)}function P(y,p,R){const _=s.value,F=_.selectionEnd,L=_.value.length-F,G=N(y);p===!0&&K();const V=S(G),z=e.fillMask!==!1?O(V):V,D=h.value!==z;_.value!==z&&(_.value=z),D===!0&&(h.value=z),document.activeElement===_&&be(()=>{if(z===f){const W=e.reverseFillMask===!0?f.length:0;_.setSelectionRange(W,W,"forward");return}if(R==="insertFromPaste"&&e.reverseFillMask!==!0){const W=_.selectionEnd;let Q=F-1;for(let C=E;C<=Q&&C<W;C++)d[C]!==oe&&Q++;$.right(_,Q);return}if(["deleteContentBackward","deleteContentForward"].indexOf(R)!==-1){const W=e.reverseFillMask===!0?F===0?z.length>V.length?1:0:Math.max(0,z.length-(z===f?0:Math.min(V.length,L)+1))+1:F;_.setSelectionRange(W,W,"forward");return}if(e.reverseFillMask===!0)if(D===!0){const W=Math.max(0,z.length-(z===f?0:Math.min(V.length,L+1)));W===1&&F===1?_.setSelectionRange(W,W,"forward"):$.rightReverse(_,W)}else{const W=z.length-L;_.setSelectionRange(W,W,"backward")}else if(D===!0){const W=Math.max(0,d.indexOf(oe),Math.min(V.length,F)-1);$.right(_,W)}else{const W=F-1;$.right(_,W)}});const j=e.unmaskedValue===!0?N(z):z;String(e.modelValue)!==j&&(e.modelValue!==null||j!=="")&&u(j,!0)}function X(y,p,R){const _=S(N(y.value));p=Math.max(0,d.indexOf(oe),Math.min(_.length,p)),E=p,y.setSelectionRange(p,R,"forward")}const $={left(y,p){const R=d.slice(p-1).indexOf(oe)===-1;let _=Math.max(0,p-1);for(;_>=0;_--)if(d[_]===oe){p=_,R===!0&&p++;break}if(_<0&&d[p]!==void 0&&d[p]!==oe)return $.right(y,0);p>=0&&y.setSelectionRange(p,p,"backward")},right(y,p){const R=y.value.length;let _=Math.min(R,p+1);for(;_<=R;_++)if(d[_]===oe){p=_;break}else d[_-1]===oe&&(p=_);if(_>R&&d[p-1]!==void 0&&d[p-1]!==oe)return $.left(y,R);y.setSelectionRange(p,p,"forward")},leftReverse(y,p){const R=q(y.value.length);let _=Math.max(0,p-1);for(;_>=0;_--)if(R[_-1]===oe){p=_;break}else if(R[_]===oe&&(p=_,_===0))break;if(_<0&&R[p]!==void 0&&R[p]!==oe)return $.rightReverse(y,0);p>=0&&y.setSelectionRange(p,p,"backward")},rightReverse(y,p){const R=y.value.length,_=q(R),F=_.slice(0,p+1).indexOf(oe)===-1;let L=Math.min(R,p+1);for(;L<=R;L++)if(_[L-1]===oe){p=L,p>0&&F===!0&&p--;break}if(L>R&&_[p-1]!==void 0&&_[p-1]!==oe)return $.leftReverse(y,R);y.setSelectionRange(p,p,"forward")}};function le(y){o("click",y),I=void 0}function ee(y){if(o("keydown",y),an(y)===!0||y.altKey===!0)return;const p=s.value,R=p.selectionStart,_=p.selectionEnd;if(y.shiftKey||(I=void 0),y.keyCode===37||y.keyCode===39){y.shiftKey&&I===void 0&&(I=p.selectionDirection==="forward"?R:_);const F=$[(y.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(y.preventDefault(),F(p,I===R?_:R),y.shiftKey){const L=p.selectionStart;p.setSelectionRange(Math.min(I,L),Math.max(I,L),"forward")}}else y.keyCode===8&&e.reverseFillMask!==!0&&R===_?($.left(p,R),p.setSelectionRange(p.selectionStart,_,"backward")):y.keyCode===46&&e.reverseFillMask===!0&&R===_&&($.rightReverse(p,_),p.setSelectionRange(R,p.selectionEnd,"forward"))}function S(y){if(y==null||y==="")return"";if(e.reverseFillMask===!0)return A(y);const p=m;let R=0,_="";for(let F=0;F<p.length;F++){const L=y[R],G=p[F];if(typeof G=="string")_+=G,L===G&&R++;else if(L!==void 0&&G.regex.test(L))_+=G.transform!==void 0?G.transform(L):L,R++;else return _}return _}function A(y){const p=m,R=d.indexOf(oe);let _=y.length-1,F="";for(let L=p.length-1;L>=0&&_!==-1;L--){const G=p[L];let V=y[_];if(typeof G=="string")F=G+F,V===G&&_--;else if(V!==void 0&&G.regex.test(V))do F=(G.transform!==void 0?G.transform(V):V)+F,_--,V=y[_];while(R===L&&V!==void 0&&G.regex.test(V));else return F}return F}function N(y){return typeof y!="string"||v===void 0?typeof y=="number"?v(""+y):y:v(y)}function O(y){return f.length-y.length<=0?y:e.reverseFillMask===!0&&y.length!==0?f.slice(0,-y.length)+y:y+f.slice(y.length)}return{innerValue:h,hasMask:T,moveCursorForPaste:X,updateMaskValue:P,onMaskedKeydown:ee,onMaskedClick:le}}const Rn={name:String};function no(e={}){return(o,u,s)=>{o[u](Z("input",{class:"hidden"+(s||""),...e.value}))}}function Nn(e){return Y(()=>e.name||e.for)}function Dn(e,o){function u(){const s=e.modelValue;try{const d="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(s)===s&&("length"in s?Array.from(s):[s]).forEach(f=>{d.items.add(f)}),{files:d.files}}catch{return{files:void 0}}}return Y(()=>{if(e.type==="file")return u()})}const In=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,kn=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,An=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Bn=/[a-z0-9_ -]$/i;function Tn(e){return function(u){if(u.type==="compositionend"||u.type==="change"){if(u.target.qComposing!==!0)return;u.target.qComposing=!1,e(u)}else u.type==="compositionupdate"&&u.target.qComposing!==!0&&typeof u.data=="string"&&(ln.is.firefox===!0?Bn.test(u.data)===!1:In.test(u.data)===!0||kn.test(u.data)===!0||An.test(u.data)===!0)===!0&&(u.target.qComposing=!0)}}const oo=ut({name:"QInput",inheritAttrs:!1,props:{...bn,...xn,...Rn,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...wn,"paste","change","keydown","click","animationend"],setup(e,{emit:o,attrs:u}){const{proxy:s}=Se(),{$q:d}=s,f={};let m=NaN,v,E,I=null,T;const h=ue(null),B=Nn(e),{innerValue:M,hasMask:q,moveCursorForPaste:K,updateMaskValue:P,onMaskedKeydown:X,onMaskedClick:$}=En(e,o,V,h),le=Dn(e),ee=Y(()=>lt(M.value)),S=Tn(L),A=_n({changeEvent:!0}),N=Y(()=>e.type==="textarea"||e.autogrow===!0),O=Y(()=>N.value===!0||["text","search","url","tel","password"].includes(e.type)),y=Y(()=>{const C={...A.splitAttrs.listeners.value,onInput:L,onPaste:F,onChange:D,onBlur:j,onFocus:It};return C.onCompositionstart=C.onCompositionupdate=C.onCompositionend=S,q.value===!0&&(C.onKeydown=X,C.onClick=$),e.autogrow===!0&&(C.onAnimationend=G),C}),p=Y(()=>{const C={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:B.value,...A.splitAttrs.attributes.value,id:A.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return N.value===!1&&(C.type=e.type),e.autogrow===!0&&(C.rows=1),C});se(()=>e.type,()=>{h.value&&(h.value.value=e.modelValue)}),se(()=>e.modelValue,C=>{if(q.value===!0){if(E===!0&&(E=!1,String(C)===m))return;P(C)}else M.value!==C&&(M.value=C,e.type==="number"&&f.hasOwnProperty("value")===!0&&(v===!0?v=!1:delete f.value));e.autogrow===!0&&be(z)}),se(()=>e.autogrow,C=>{C===!0?be(z):h.value!==null&&u.rows>0&&(h.value.style.height="auto")}),se(()=>e.dense,()=>{e.autogrow===!0&&be(z)});function R(){Xt(()=>{const C=document.activeElement;h.value!==null&&h.value!==C&&(C===null||C.id!==A.targetUid.value)&&h.value.focus({preventScroll:!0})})}function _(){h.value?.select()}function F(C){if(q.value===!0&&e.reverseFillMask!==!0){const te=C.target;K(te,te.selectionStart,te.selectionEnd)}o("paste",C)}function L(C){if(!C||!C.target)return;if(e.type==="file"){o("update:modelValue",C.target.files);return}const te=C.target.value;if(C.target.qComposing===!0){f.value=te;return}if(q.value===!0)P(te,!1,C.inputType);else if(V(te),O.value===!0&&C.target===document.activeElement){const{selectionStart:ve,selectionEnd:fe}=C.target;ve!==void 0&&fe!==void 0&&be(()=>{C.target===document.activeElement&&te.indexOf(C.target.value)===0&&C.target.setSelectionRange(ve,fe)})}e.autogrow===!0&&z()}function G(C){o("animationend",C),z()}function V(C,te){T=()=>{I=null,e.type!=="number"&&f.hasOwnProperty("value")===!0&&delete f.value,e.modelValue!==C&&m!==C&&(m=C,te===!0&&(E=!0),o("update:modelValue",C),be(()=>{m===C&&(m=NaN)})),T=void 0},e.type==="number"&&(v=!0,f.value=C),e.debounce!==void 0?(I!==null&&clearTimeout(I),f.value=C,I=setTimeout(T,e.debounce)):T()}function z(){requestAnimationFrame(()=>{const C=h.value;if(C!==null){const te=C.parentNode.style,{scrollTop:ve}=C,{overflowY:fe,maxHeight:ie}=d.platform.is.firefox===!0?{}:window.getComputedStyle(C),ge=fe!==void 0&&fe!=="scroll";ge===!0&&(C.style.overflowY="hidden"),te.marginBottom=C.scrollHeight-1+"px",C.style.height="1px",C.style.height=C.scrollHeight+"px",ge===!0&&(C.style.overflowY=parseInt(ie,10)<C.scrollHeight?"auto":"hidden"),te.marginBottom="",C.scrollTop=ve}})}function D(C){S(C),I!==null&&(clearTimeout(I),I=null),T?.(),o("change",C.target.value)}function j(C){C!==void 0&&It(C),I!==null&&(clearTimeout(I),I=null),T?.(),v=!1,E=!1,delete f.value,e.type!=="file"&&setTimeout(()=>{h.value!==null&&(h.value.value=M.value!==void 0?M.value:"")})}function W(){return f.hasOwnProperty("value")===!0?f.value:M.value!==void 0?M.value:""}Ve(()=>{j()}),Le(()=>{e.autogrow===!0&&z()}),Object.assign(A,{innerValue:M,fieldClass:Y(()=>`q-${N.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:Y(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:h,emitValue:V,hasValue:ee,floatingLabel:Y(()=>ee.value===!0&&(e.type!=="number"||isNaN(M.value)===!1)||lt(e.displayValue)),getControl:()=>Z(N.value===!0?"textarea":"input",{ref:h,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...p.value,...y.value,...e.type!=="file"?{value:W()}:le.value}),getShadowControl:()=>Z("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(N.value===!0?"":" text-no-wrap")},[Z("span",{class:"invisible"},W()),Z("span",e.shadowText)])});const Q=Sn(A);return Object.assign(s,{focus:R,select:_,getNativeElement:()=>h.value}),Jt(s,"nativeEl",()=>h.value),Q}});function io(){return Wt(un)}const ao=ut({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:o}){const u=Y(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>Z(e.tag,{class:u.value},xe(o.default))}}),lo=ut({name:"QCard",props:{...Ht,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:o}){const{proxy:{$q:u}}=Se(),s=Zt(e,u),d=Y(()=>"q-card"+(s.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>Z(e.tag,{class:d.value},xe(o.default))}});var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Fe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Pt;function Mn(){return Pt||(Pt=1,function(e,o){(function(u){e.exports=u()})(function(){return function u(s,d,f){function m(I,T){if(!d[I]){if(!s[I]){var h=typeof Fe=="function"&&Fe;if(!T&&h)return h(I,!0);if(v)return v(I,!0);var B=new Error("Cannot find module '"+I+"'");throw B.code="MODULE_NOT_FOUND",B}var M=d[I]={exports:{}};s[I][0].call(M.exports,function(q){var K=s[I][1][q];return m(K||q)},M,M.exports,u,s,d,f)}return d[I].exports}for(var v=typeof Fe=="function"&&Fe,E=0;E<f.length;E++)m(f[E]);return m}({1:[function(u,s,d){(function(f){var m=f.MutationObserver||f.WebKitMutationObserver,v;if(m){var E=0,I=new m(q),T=f.document.createTextNode("");I.observe(T,{characterData:!0}),v=function(){T.data=E=++E%2}}else if(!f.setImmediate&&typeof f.MessageChannel<"u"){var h=new f.MessageChannel;h.port1.onmessage=q,v=function(){h.port2.postMessage(0)}}else"document"in f&&"onreadystatechange"in f.document.createElement("script")?v=function(){var P=f.document.createElement("script");P.onreadystatechange=function(){q(),P.onreadystatechange=null,P.parentNode.removeChild(P),P=null},f.document.documentElement.appendChild(P)}:v=function(){setTimeout(q,0)};var B,M=[];function q(){B=!0;for(var P,X,$=M.length;$;){for(X=M,M=[],P=-1;++P<$;)X[P]();$=M.length}B=!1}s.exports=K;function K(P){M.push(P)===1&&!B&&v()}}).call(this,typeof $e<"u"?$e:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(u,s,d){var f=u(1);function m(){}var v={},E=["REJECTED"],I=["FULFILLED"],T=["PENDING"];s.exports=h;function h(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,S!==m&&K(this,S)}h.prototype.catch=function(S){return this.then(null,S)},h.prototype.then=function(S,A){if(typeof S!="function"&&this.state===I||typeof A!="function"&&this.state===E)return this;var N=new this.constructor(m);if(this.state!==T){var O=this.state===I?S:A;M(N,O,this.outcome)}else this.queue.push(new B(N,S,A));return N};function B(S,A,N){this.promise=S,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}B.prototype.callFulfilled=function(S){v.resolve(this.promise,S)},B.prototype.otherCallFulfilled=function(S){M(this.promise,this.onFulfilled,S)},B.prototype.callRejected=function(S){v.reject(this.promise,S)},B.prototype.otherCallRejected=function(S){M(this.promise,this.onRejected,S)};function M(S,A,N){f(function(){var O;try{O=A(N)}catch(y){return v.reject(S,y)}O===S?v.reject(S,new TypeError("Cannot resolve promise with itself")):v.resolve(S,O)})}v.resolve=function(S,A){var N=P(q,A);if(N.status==="error")return v.reject(S,N.value);var O=N.value;if(O)K(S,O);else{S.state=I,S.outcome=A;for(var y=-1,p=S.queue.length;++y<p;)S.queue[y].callFulfilled(A)}return S},v.reject=function(S,A){S.state=E,S.outcome=A;for(var N=-1,O=S.queue.length;++N<O;)S.queue[N].callRejected(A);return S};function q(S){var A=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof A=="function")return function(){A.apply(S,arguments)}}function K(S,A){var N=!1;function O(_){N||(N=!0,v.reject(S,_))}function y(_){N||(N=!0,v.resolve(S,_))}function p(){A(y,O)}var R=P(p);R.status==="error"&&O(R.value)}function P(S,A){var N={};try{N.value=S(A),N.status="success"}catch(O){N.status="error",N.value=O}return N}h.resolve=X;function X(S){return S instanceof this?S:v.resolve(new this(m),S)}h.reject=$;function $(S){var A=new this(m);return v.reject(A,S)}h.all=le;function le(S){var A=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=S.length,O=!1;if(!N)return this.resolve([]);for(var y=new Array(N),p=0,R=-1,_=new this(m);++R<N;)F(S[R],R);return _;function F(L,G){A.resolve(L).then(V,function(z){O||(O=!0,v.reject(_,z))});function V(z){y[G]=z,++p===N&&!O&&(O=!0,v.resolve(_,y))}}}h.race=ee;function ee(S){var A=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=S.length,O=!1;if(!N)return this.resolve([]);for(var y=-1,p=new this(m);++y<N;)R(S[y]);return p;function R(_){A.resolve(_).then(function(F){O||(O=!0,v.resolve(p,F))},function(F){O||(O=!0,v.reject(p,F))})}}},{1:1}],3:[function(u,s,d){(function(f){typeof f.Promise!="function"&&(f.Promise=u(2))}).call(this,typeof $e<"u"?$e:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(u,s,d){var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function m(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function v(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var E=v();function I(){try{if(!E||!E.open)return!1;var t=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!t||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function T(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(i){if(i.name!=="TypeError")throw i;for(var r=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,a=new r,l=0;l<t.length;l+=1)a.append(t[l]);return a.getBlob(n.type)}}typeof Promise>"u"&&u(3);var h=Promise;function B(t,n){n&&t.then(function(r){n(null,r)},function(r){n(r)})}function M(t,n,r){typeof n=="function"&&t.then(n),typeof r=="function"&&t.catch(r)}function q(t){return typeof t!="string"&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function K(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var P="local-forage-detect-blob-support",X=void 0,$={},le=Object.prototype.toString,ee="readonly",S="readwrite";function A(t){for(var n=t.length,r=new ArrayBuffer(n),a=new Uint8Array(r),l=0;l<n;l++)a[l]=t.charCodeAt(l);return r}function N(t){return new h(function(n){var r=t.transaction(P,S),a=T([""]);r.objectStore(P).put(a,"key"),r.onabort=function(l){l.preventDefault(),l.stopPropagation(),n(!1)},r.oncomplete=function(){var l=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);n(i||!l||parseInt(l[1],10)>=43)}}).catch(function(){return!1})}function O(t){return typeof X=="boolean"?h.resolve(X):N(t).then(function(n){return X=n,X})}function y(t){var n=$[t.name],r={};r.promise=new h(function(a,l){r.resolve=a,r.reject=l}),n.deferredOperations.push(r),n.dbReady?n.dbReady=n.dbReady.then(function(){return r.promise}):n.dbReady=r.promise}function p(t){var n=$[t.name],r=n.deferredOperations.pop();if(r)return r.resolve(),r.promise}function R(t,n){var r=$[t.name],a=r.deferredOperations.pop();if(a)return a.reject(n),a.promise}function _(t,n){return new h(function(r,a){if($[t.name]=$[t.name]||C(),t.db)if(n)y(t),t.db.close();else return r(t.db);var l=[t.name];n&&l.push(t.version);var i=E.open.apply(E,l);n&&(i.onupgradeneeded=function(c){var g=i.result;try{g.createObjectStore(t.storeName),c.oldVersion<=1&&g.createObjectStore(P)}catch(b){if(b.name==="ConstraintError")console.warn('The database "'+t.name+'" has been upgraded from version '+c.oldVersion+" to version "+c.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw b}}),i.onerror=function(c){c.preventDefault(),a(i.error)},i.onsuccess=function(){var c=i.result;c.onversionchange=function(g){g.target.close()},r(c),p(t)}})}function F(t){return _(t,!1)}function L(t){return _(t,!0)}function G(t,n){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),a=t.version<t.db.version,l=t.version>t.db.version;if(a&&(t.version!==n&&console.warn('The database "'+t.name+`" can't be downgraded from version `+t.db.version+" to version "+t.version+"."),t.version=t.db.version),l||r){if(r){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function V(t){return new h(function(n,r){var a=new FileReader;a.onerror=r,a.onloadend=function(l){var i=btoa(l.target.result||"");n({__local_forage_encoded_blob:!0,data:i,type:t.type})},a.readAsBinaryString(t)})}function z(t){var n=A(atob(t.data));return T([n],{type:t.type})}function D(t){return t&&t.__local_forage_encoded_blob}function j(t){var n=this,r=n._initReady().then(function(){var a=$[n._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return M(r,t,t),r}function W(t){y(t);for(var n=$[t.name],r=n.forages,a=0;a<r.length;a++){var l=r[a];l._dbInfo.db&&(l._dbInfo.db.close(),l._dbInfo.db=null)}return t.db=null,F(t).then(function(i){return t.db=i,G(t)?L(t):i}).then(function(i){t.db=n.db=i;for(var c=0;c<r.length;c++)r[c]._dbInfo.db=i}).catch(function(i){throw R(t,i),i})}function Q(t,n,r,a){a===void 0&&(a=1);try{var l=t.db.transaction(t.storeName,n);r(null,l)}catch(i){if(a>0&&(!t.db||i.name==="InvalidStateError"||i.name==="NotFoundError"))return h.resolve().then(function(){if(!t.db||i.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),L(t)}).then(function(){return W(t).then(function(){Q(t,n,r,a-1)})}).catch(r);r(i)}}function C(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function te(t){var n=this,r={db:null};if(t)for(var a in t)r[a]=t[a];var l=$[r.name];l||(l=C(),$[r.name]=l),l.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=j);var i=[];function c(){return h.resolve()}for(var g=0;g<l.forages.length;g++){var b=l.forages[g];b!==n&&i.push(b._initReady().catch(c))}var w=l.forages.slice(0);return h.all(i).then(function(){return r.db=l.db,F(r)}).then(function(x){return r.db=x,G(r,n._defaultConfig.version)?L(r):x}).then(function(x){r.db=l.db=x,n._dbInfo=r;for(var k=0;k<w.length;k++){var U=w[k];U!==n&&(U._dbInfo.db=r.db,U._dbInfo.version=r.version)}})}function ve(t,n){var r=this;t=q(t);var a=new h(function(l,i){r.ready().then(function(){Q(r._dbInfo,ee,function(c,g){if(c)return i(c);try{var b=g.objectStore(r._dbInfo.storeName),w=b.get(t);w.onsuccess=function(){var x=w.result;x===void 0&&(x=null),D(x)&&(x=z(x)),l(x)},w.onerror=function(){i(w.error)}}catch(x){i(x)}})}).catch(i)});return B(a,n),a}function fe(t,n){var r=this,a=new h(function(l,i){r.ready().then(function(){Q(r._dbInfo,ee,function(c,g){if(c)return i(c);try{var b=g.objectStore(r._dbInfo.storeName),w=b.openCursor(),x=1;w.onsuccess=function(){var k=w.result;if(k){var U=k.value;D(U)&&(U=z(U));var J=t(U,k.key,x++);J!==void 0?l(J):k.continue()}else l()},w.onerror=function(){i(w.error)}}catch(k){i(k)}})}).catch(i)});return B(a,n),a}function ie(t,n,r){var a=this;t=q(t);var l=new h(function(i,c){var g;a.ready().then(function(){return g=a._dbInfo,le.call(n)==="[object Blob]"?O(g.db).then(function(b){return b?n:V(n)}):n}).then(function(b){Q(a._dbInfo,S,function(w,x){if(w)return c(w);try{var k=x.objectStore(a._dbInfo.storeName);b===null&&(b=void 0);var U=k.put(b,t);x.oncomplete=function(){b===void 0&&(b=null),i(b)},x.onabort=x.onerror=function(){var J=U.error?U.error:U.transaction.error;c(J)}}catch(J){c(J)}})}).catch(c)});return B(l,r),l}function ge(t,n){var r=this;t=q(t);var a=new h(function(l,i){r.ready().then(function(){Q(r._dbInfo,S,function(c,g){if(c)return i(c);try{var b=g.objectStore(r._dbInfo.storeName),w=b.delete(t);g.oncomplete=function(){l()},g.onerror=function(){i(w.error)},g.onabort=function(){var x=w.error?w.error:w.transaction.error;i(x)}}catch(x){i(x)}})}).catch(i)});return B(a,n),a}function or(t){var n=this,r=new h(function(a,l){n.ready().then(function(){Q(n._dbInfo,S,function(i,c){if(i)return l(i);try{var g=c.objectStore(n._dbInfo.storeName),b=g.clear();c.oncomplete=function(){a()},c.onabort=c.onerror=function(){var w=b.error?b.error:b.transaction.error;l(w)}}catch(w){l(w)}})}).catch(l)});return B(r,t),r}function ir(t){var n=this,r=new h(function(a,l){n.ready().then(function(){Q(n._dbInfo,ee,function(i,c){if(i)return l(i);try{var g=c.objectStore(n._dbInfo.storeName),b=g.count();b.onsuccess=function(){a(b.result)},b.onerror=function(){l(b.error)}}catch(w){l(w)}})}).catch(l)});return B(r,t),r}function ar(t,n){var r=this,a=new h(function(l,i){if(t<0){l(null);return}r.ready().then(function(){Q(r._dbInfo,ee,function(c,g){if(c)return i(c);try{var b=g.objectStore(r._dbInfo.storeName),w=!1,x=b.openKeyCursor();x.onsuccess=function(){var k=x.result;if(!k){l(null);return}t===0||w?l(k.key):(w=!0,k.advance(t))},x.onerror=function(){i(x.error)}}catch(k){i(k)}})}).catch(i)});return B(a,n),a}function lr(t){var n=this,r=new h(function(a,l){n.ready().then(function(){Q(n._dbInfo,ee,function(i,c){if(i)return l(i);try{var g=c.objectStore(n._dbInfo.storeName),b=g.openKeyCursor(),w=[];b.onsuccess=function(){var x=b.result;if(!x){a(w);return}w.push(x.key),x.continue()},b.onerror=function(){l(b.error)}}catch(x){l(x)}})}).catch(l)});return B(r,t),r}function ur(t,n){n=K.apply(this,arguments);var r=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var a=this,l;if(!t.name)l=h.reject("Invalid arguments");else{var i=t.name===r.name&&a._dbInfo.db,c=i?h.resolve(a._dbInfo.db):F(t).then(function(g){var b=$[t.name],w=b.forages;b.db=g;for(var x=0;x<w.length;x++)w[x]._dbInfo.db=g;return g});t.storeName?l=c.then(function(g){if(g.objectStoreNames.contains(t.storeName)){var b=g.version+1;y(t);var w=$[t.name],x=w.forages;g.close();for(var k=0;k<x.length;k++){var U=x[k];U._dbInfo.db=null,U._dbInfo.version=b}var J=new h(function(H,ne){var re=E.open(t.name,b);re.onerror=function(de){var Ne=re.result;Ne.close(),ne(de)},re.onupgradeneeded=function(){var de=re.result;de.deleteObjectStore(t.storeName)},re.onsuccess=function(){var de=re.result;de.close(),H(de)}});return J.then(function(H){w.db=H;for(var ne=0;ne<x.length;ne++){var re=x[ne];re._dbInfo.db=H,p(re._dbInfo)}}).catch(function(H){throw(R(t,H)||h.resolve()).catch(function(){}),H})}}):l=c.then(function(g){y(t);var b=$[t.name],w=b.forages;g.close();for(var x=0;x<w.length;x++){var k=w[x];k._dbInfo.db=null}var U=new h(function(J,H){var ne=E.deleteDatabase(t.name);ne.onerror=function(){var re=ne.result;re&&re.close(),H(ne.error)},ne.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},ne.onsuccess=function(){var re=ne.result;re&&re.close(),J(re)}});return U.then(function(J){b.db=J;for(var H=0;H<w.length;H++){var ne=w[H];p(ne._dbInfo)}}).catch(function(J){throw(R(t,J)||h.resolve()).catch(function(){}),J})})}return B(l,n),l}var sr={_driver:"asyncStorage",_initStorage:te,_support:I(),iterate:fe,getItem:ve,setItem:ie,removeItem:ge,clear:or,length:ir,key:ar,keys:lr,dropInstance:ur};function fr(){return typeof openDatabase=="function"}var ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cr="~~local_forage_type~",ft=/^~~local_forage_type~([^~]+)~/,Ae="__lfsc__:",Ue=Ae.length,ze="arbf",je="blob",ct="si08",dt="ui08",ht="uic8",vt="si16",mt="si32",gt="ur16",yt="ui32",pt="fl32",bt="fl64",wt=Ue+ze.length,_t=Object.prototype.toString;function St(t){var n=t.length*.75,r=t.length,a,l=0,i,c,g,b;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);var w=new ArrayBuffer(n),x=new Uint8Array(w);for(a=0;a<r;a+=4)i=ye.indexOf(t[a]),c=ye.indexOf(t[a+1]),g=ye.indexOf(t[a+2]),b=ye.indexOf(t[a+3]),x[l++]=i<<2|c>>4,x[l++]=(c&15)<<4|g>>2,x[l++]=(g&3)<<6|b&63;return w}function Ke(t){var n=new Uint8Array(t),r="",a;for(a=0;a<n.length;a+=3)r+=ye[n[a]>>2],r+=ye[(n[a]&3)<<4|n[a+1]>>4],r+=ye[(n[a+1]&15)<<2|n[a+2]>>6],r+=ye[n[a+2]&63];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function dr(t,n){var r="";if(t&&(r=_t.call(t)),t&&(r==="[object ArrayBuffer]"||t.buffer&&_t.call(t.buffer)==="[object ArrayBuffer]")){var a,l=Ae;t instanceof ArrayBuffer?(a=t,l+=ze):(a=t.buffer,r==="[object Int8Array]"?l+=ct:r==="[object Uint8Array]"?l+=dt:r==="[object Uint8ClampedArray]"?l+=ht:r==="[object Int16Array]"?l+=vt:r==="[object Uint16Array]"?l+=gt:r==="[object Int32Array]"?l+=mt:r==="[object Uint32Array]"?l+=yt:r==="[object Float32Array]"?l+=pt:r==="[object Float64Array]"?l+=bt:n(new Error("Failed to get type for BinaryArray"))),n(l+Ke(a))}else if(r==="[object Blob]"){var i=new FileReader;i.onload=function(){var c=cr+t.type+"~"+Ke(this.result);n(Ae+je+c)},i.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(c){console.error("Couldn't convert value into a JSON string: ",t),n(null,c)}}function hr(t){if(t.substring(0,Ue)!==Ae)return JSON.parse(t);var n=t.substring(wt),r=t.substring(Ue,wt),a;if(r===je&&ft.test(n)){var l=n.match(ft);a=l[1],n=n.substring(l[0].length)}var i=St(n);switch(r){case ze:return i;case je:return T([i],{type:a});case ct:return new Int8Array(i);case dt:return new Uint8Array(i);case ht:return new Uint8ClampedArray(i);case vt:return new Int16Array(i);case gt:return new Uint16Array(i);case mt:return new Int32Array(i);case yt:return new Uint32Array(i);case pt:return new Float32Array(i);case bt:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var Qe={serialize:dr,deserialize:hr,stringToBuffer:St,bufferToString:Ke};function Ct(t,n,r,a){t.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,a)}function vr(t){var n=this,r={db:null};if(t)for(var a in t)r[a]=typeof t[a]!="string"?t[a].toString():t[a];var l=new h(function(i,c){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(g){return c(g)}r.db.transaction(function(g){Ct(g,r,function(){n._dbInfo=r,i()},function(b,w){c(w)})},c)});return r.serializer=Qe,l}function pe(t,n,r,a,l,i){t.executeSql(r,a,l,function(c,g){g.code===g.SYNTAX_ERR?c.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(b,w){w.rows.length?i(b,g):Ct(b,n,function(){b.executeSql(r,a,l,i)},i)},i):i(c,g)},i)}function mr(t,n){var r=this;t=q(t);var a=new h(function(l,i){r.ready().then(function(){var c=r._dbInfo;c.db.transaction(function(g){pe(g,c,"SELECT * FROM "+c.storeName+" WHERE key = ? LIMIT 1",[t],function(b,w){var x=w.rows.length?w.rows.item(0).value:null;x&&(x=c.serializer.deserialize(x)),l(x)},function(b,w){i(w)})})}).catch(i)});return B(a,n),a}function gr(t,n){var r=this,a=new h(function(l,i){r.ready().then(function(){var c=r._dbInfo;c.db.transaction(function(g){pe(g,c,"SELECT * FROM "+c.storeName,[],function(b,w){for(var x=w.rows,k=x.length,U=0;U<k;U++){var J=x.item(U),H=J.value;if(H&&(H=c.serializer.deserialize(H)),H=t(H,J.key,U+1),H!==void 0){l(H);return}}l()},function(b,w){i(w)})})}).catch(i)});return B(a,n),a}function xt(t,n,r,a){var l=this;t=q(t);var i=new h(function(c,g){l.ready().then(function(){n===void 0&&(n=null);var b=n,w=l._dbInfo;w.serializer.serialize(n,function(x,k){k?g(k):w.db.transaction(function(U){pe(U,w,"INSERT OR REPLACE INTO "+w.storeName+" (key, value) VALUES (?, ?)",[t,x],function(){c(b)},function(J,H){g(H)})},function(U){if(U.code===U.QUOTA_ERR){if(a>0){c(xt.apply(l,[t,b,r,a-1]));return}g(U)}})})}).catch(g)});return B(i,r),i}function yr(t,n,r){return xt.apply(this,[t,n,r,1])}function pr(t,n){var r=this;t=q(t);var a=new h(function(l,i){r.ready().then(function(){var c=r._dbInfo;c.db.transaction(function(g){pe(g,c,"DELETE FROM "+c.storeName+" WHERE key = ?",[t],function(){l()},function(b,w){i(w)})})}).catch(i)});return B(a,n),a}function br(t){var n=this,r=new h(function(a,l){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(c){pe(c,i,"DELETE FROM "+i.storeName,[],function(){a()},function(g,b){l(b)})})}).catch(l)});return B(r,t),r}function wr(t){var n=this,r=new h(function(a,l){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(c){pe(c,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],function(g,b){var w=b.rows.item(0).c;a(w)},function(g,b){l(b)})})}).catch(l)});return B(r,t),r}function _r(t,n){var r=this,a=new h(function(l,i){r.ready().then(function(){var c=r._dbInfo;c.db.transaction(function(g){pe(g,c,"SELECT key FROM "+c.storeName+" WHERE id = ? LIMIT 1",[t+1],function(b,w){var x=w.rows.length?w.rows.item(0).key:null;l(x)},function(b,w){i(w)})})}).catch(i)});return B(a,n),a}function Sr(t){var n=this,r=new h(function(a,l){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(c){pe(c,i,"SELECT key FROM "+i.storeName,[],function(g,b){for(var w=[],x=0;x<b.rows.length;x++)w.push(b.rows.item(x).key);a(w)},function(g,b){l(b)})})}).catch(l)});return B(r,t),r}function Cr(t){return new h(function(n,r){t.transaction(function(a){a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(l,i){for(var c=[],g=0;g<i.rows.length;g++)c.push(i.rows.item(g).name);n({db:t,storeNames:c})},function(l,i){r(i)})},function(a){r(a)})})}function xr(t,n){n=K.apply(this,arguments);var r=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var a=this,l;return t.name?l=new h(function(i){var c;t.name===r.name?c=a._dbInfo.db:c=openDatabase(t.name,"","",0),t.storeName?i({db:c,storeNames:[t.storeName]}):i(Cr(c))}).then(function(i){return new h(function(c,g){i.db.transaction(function(b){function w(J){return new h(function(H,ne){b.executeSql("DROP TABLE IF EXISTS "+J,[],function(){H()},function(re,de){ne(de)})})}for(var x=[],k=0,U=i.storeNames.length;k<U;k++)x.push(w(i.storeNames[k]));h.all(x).then(function(){c()}).catch(function(J){g(J)})},function(b){g(b)})})}):l=h.reject("Invalid arguments"),B(l,n),l}var Er={_driver:"webSQLStorage",_initStorage:vr,_support:fr(),iterate:gr,getItem:mr,setItem:yr,removeItem:pr,clear:br,length:wr,key:_r,keys:Sr,dropInstance:xr};function Rr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Et(t,n){var r=t.name+"/";return t.storeName!==n.storeName&&(r+=t.storeName+"/"),r}function Nr(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch{return!0}}function Dr(){return!Nr()||localStorage.length>0}function Ir(t){var n=this,r={};if(t)for(var a in t)r[a]=t[a];return r.keyPrefix=Et(t,n._defaultConfig),Dr()?(n._dbInfo=r,r.serializer=Qe,h.resolve()):h.reject()}function kr(t){var n=this,r=n.ready().then(function(){for(var a=n._dbInfo.keyPrefix,l=localStorage.length-1;l>=0;l--){var i=localStorage.key(l);i.indexOf(a)===0&&localStorage.removeItem(i)}});return B(r,t),r}function Ar(t,n){var r=this;t=q(t);var a=r.ready().then(function(){var l=r._dbInfo,i=localStorage.getItem(l.keyPrefix+t);return i&&(i=l.serializer.deserialize(i)),i});return B(a,n),a}function Br(t,n){var r=this,a=r.ready().then(function(){for(var l=r._dbInfo,i=l.keyPrefix,c=i.length,g=localStorage.length,b=1,w=0;w<g;w++){var x=localStorage.key(w);if(x.indexOf(i)===0){var k=localStorage.getItem(x);if(k&&(k=l.serializer.deserialize(k)),k=t(k,x.substring(c),b++),k!==void 0)return k}}});return B(a,n),a}function Tr(t,n){var r=this,a=r.ready().then(function(){var l=r._dbInfo,i;try{i=localStorage.key(t)}catch{i=null}return i&&(i=i.substring(l.keyPrefix.length)),i});return B(a,n),a}function Mr(t){var n=this,r=n.ready().then(function(){for(var a=n._dbInfo,l=localStorage.length,i=[],c=0;c<l;c++){var g=localStorage.key(c);g.indexOf(a.keyPrefix)===0&&i.push(g.substring(a.keyPrefix.length))}return i});return B(r,t),r}function Or(t){var n=this,r=n.keys().then(function(a){return a.length});return B(r,t),r}function $r(t,n){var r=this;t=q(t);var a=r.ready().then(function(){var l=r._dbInfo;localStorage.removeItem(l.keyPrefix+t)});return B(a,n),a}function Fr(t,n,r){var a=this;t=q(t);var l=a.ready().then(function(){n===void 0&&(n=null);var i=n;return new h(function(c,g){var b=a._dbInfo;b.serializer.serialize(n,function(w,x){if(x)g(x);else try{localStorage.setItem(b.keyPrefix+t,w),c(i)}catch(k){(k.name==="QuotaExceededError"||k.name==="NS_ERROR_DOM_QUOTA_REACHED")&&g(k),g(k)}})})});return B(l,r),l}function qr(t,n){if(n=K.apply(this,arguments),t=typeof t!="function"&&t||{},!t.name){var r=this.config();t.name=t.name||r.name,t.storeName=t.storeName||r.storeName}var a=this,l;return t.name?l=new h(function(i){t.storeName?i(Et(t,a._defaultConfig)):i(t.name+"/")}).then(function(i){for(var c=localStorage.length-1;c>=0;c--){var g=localStorage.key(c);g.indexOf(i)===0&&localStorage.removeItem(g)}}):l=h.reject("Invalid arguments"),B(l,n),l}var Pr={_driver:"localStorageWrapper",_initStorage:Ir,_support:Rr(),iterate:Br,getItem:Ar,setItem:Fr,removeItem:$r,clear:kr,length:Or,key:Tr,keys:Mr,dropInstance:qr},Lr=function(n,r){return n===r||typeof n=="number"&&typeof r=="number"&&isNaN(n)&&isNaN(r)},Vr=function(n,r){for(var a=n.length,l=0;l<a;){if(Lr(n[l],r))return!0;l++}return!1},Rt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},Re={},Nt={},Ce={INDEXEDDB:sr,WEBSQL:Er,LOCALSTORAGE:Pr},Ur=[Ce.INDEXEDDB._driver,Ce.WEBSQL._driver,Ce.LOCALSTORAGE._driver],Be=["dropInstance"],Ye=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Be),zr={description:"",driver:Ur.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function jr(t,n){t[n]=function(){var r=arguments;return t.ready().then(function(){return t[n].apply(t,r)})}}function We(){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&(Rt(n[r])?arguments[0][r]=n[r].slice():arguments[0][r]=n[r])}return arguments[0]}var Kr=function(){function t(n){m(this,t);for(var r in Ce)if(Ce.hasOwnProperty(r)){var a=Ce[r],l=a._driver;this[r]=l,Re[l]||this.defineDriver(a)}this._defaultConfig=We({},zr),this._config=We({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(r){if((typeof r>"u"?"undefined":f(r))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in r){if(a==="storeName"&&(r[a]=r[a].replace(/\W/g,"_")),a==="version"&&typeof r[a]!="number")return new Error("Database version must be a number.");this._config[a]=r[a]}return"driver"in r&&r.driver?this.setDriver(this._config.driver):!0}else return typeof r=="string"?this._config[r]:this._config},t.prototype.defineDriver=function(r,a,l){var i=new h(function(c,g){try{var b=r._driver,w=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!r._driver){g(w);return}for(var x=Ye.concat("_initStorage"),k=0,U=x.length;k<U;k++){var J=x[k],H=!Vr(Be,J);if((H||r[J])&&typeof r[J]!="function"){g(w);return}}var ne=function(){for(var Ne=function(Wr){return function(){var Jr=new Error("Method "+Wr+" is not implemented by the current driver"),Dt=h.reject(Jr);return B(Dt,arguments[arguments.length-1]),Dt}},Je=0,Yr=Be.length;Je<Yr;Je++){var He=Be[Je];r[He]||(r[He]=Ne(He))}};ne();var re=function(Ne){Re[b]&&console.info("Redefining LocalForage driver: "+b),Re[b]=r,Nt[b]=Ne,c()};"_support"in r?r._support&&typeof r._support=="function"?r._support().then(re,g):re(!!r._support):re(!0)}catch(de){g(de)}});return M(i,a,l),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(r,a,l){var i=Re[r]?h.resolve(Re[r]):h.reject(new Error("Driver not found."));return M(i,a,l),i},t.prototype.getSerializer=function(r){var a=h.resolve(Qe);return M(a,r),a},t.prototype.ready=function(r){var a=this,l=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return M(l,r,r),l},t.prototype.setDriver=function(r,a,l){var i=this;Rt(r)||(r=[r]);var c=this._getSupportedDrivers(r);function g(){i._config.driver=i.driver()}function b(k){return i._extend(k),g(),i._ready=i._initStorage(i._config),i._ready}function w(k){return function(){var U=0;function J(){for(;U<k.length;){var H=k[U];return U++,i._dbInfo=null,i._ready=null,i.getDriver(H).then(b).catch(J)}g();var ne=new Error("No available storage method found.");return i._driverSet=h.reject(ne),i._driverSet}return J()}}var x=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=x.then(function(){var k=c[0];return i._dbInfo=null,i._ready=null,i.getDriver(k).then(function(U){i._driver=U._driver,g(),i._wrapLibraryMethodsWithReady(),i._initDriver=w(c)})}).catch(function(){g();var k=new Error("No available storage method found.");return i._driverSet=h.reject(k),i._driverSet}),M(this._driverSet,a,l),this._driverSet},t.prototype.supports=function(r){return!!Nt[r]},t.prototype._extend=function(r){We(this,r)},t.prototype._getSupportedDrivers=function(r){for(var a=[],l=0,i=r.length;l<i;l++){var c=r[l];this.supports(c)&&a.push(c)}return a},t.prototype._wrapLibraryMethodsWithReady=function(){for(var r=0,a=Ye.length;r<a;r++)jr(this,Ye[r])},t.prototype.createInstance=function(r){return new t(r)},t}(),Qr=new Kr;s.exports=Qr},{3:3}]},{},[4])(4)})}(Xe)),Xe.exports}var On=Mn();const Lt=tr(On);function $n(e){if(e){if(typeof e!="string")return this.userErrors.push("Collection name in collection() method must be a string and not an object, number or boolean."),this;{this.collectionName=e;let o=this.dbName;return e in this.lf||(this.lf[e]=Lt.createInstance({driver:Lt.INDEXEDDB,name:o,storeName:e})),this}}else return this.userErrors.push("No collection name specified in collection() method."),this}function Fn(e){return e?typeof e!="string"&&typeof e!="object"?this.userErrors.push("Document criteria specified in doc() method must not be a number or boolean. Use a string (with a key) or an object (with criteria) e.g. { id: 1 }"):this.docSelectionCriteria=e:this.userErrors.push("No document criteria specified in doc() method. Use a string (with a key) or an object (with criteria) e.g. { id: 1 }"),this}function qn(e,o){return e?typeof e!="string"?this.userErrors.push("First parameter in orderBy() method must be a string (a field name) e.g. 'name'"):this.orderByProperty=e:this.userErrors.push("No field name specified in orderBy() method. Use a string e.g. 'name'"),o&&(o!=="asc"&&o!=="desc"?this.userErrors.push("Second parameter in orderBy() method must be a string set to 'asc' or 'desc'."):this.orderByDirection=o),this}function Pn(e){return e?Number.isInteger(e)?this.limitBy=e:this.userErrors.push("Limit parameter in limit() method must be an integer (e.g. 3) and not a float, boolean, string or object."):this.userErrors.push("No integer specified in limit() method."),this}function Ee(e,o){return Object.keys(o).every(u=>typeof o[u]=="object"?Ee(e[u],o[u]):o[u]===e[u])}let he={log(e,o){},error(e,o){},warn(e,o){}};function _e(){this.collectionName=null,this.orderByProperty=null,this.orderByDirection=null,this.limitBy=null,this.docSelectionCriteria=null,this.userErrors=[]}function st(){let e;return!this.collectionName&&!this.docSelectionCriteria?e="db":this.collectionName&&!this.docSelectionCriteria?e="collection":this.collectionName&&this.docSelectionCriteria&&(e="doc"),e}function ke(){for(let e=0;e<this.userErrors.length;e++)he.error.call(this,this.userErrors[e]);_e.call(this)}function Ln(e={keys:!1}){if(this.getCollection=()=>{let o=this.collectionName,u=this.orderByProperty,s=this.orderByDirection,d=e.filter,f=this.limitBy,m=[];return this.lf[o].iterate((v,E)=>{let I={};e.keys?I={key:E,data:v}:I=v,d?Ee(v,d)&&m.push(I):m.push(I)}).then(()=>{let v=`Got "${o}" collection`;return u&&(v+=`, ordered by "${u}"`,e.keys?m.sort((E,I)=>!E.hasOwnProperty(u)||!I.hasOwnProperty(u)?0:E.data[u].toString().localeCompare(I.data[u].toString())):m.sort((E,I)=>!E.hasOwnProperty(u)||!I.hasOwnProperty(u)?0:E[u].toString().localeCompare(I[u].toString()))),s=="desc"&&(v+=" (descending)",m.reverse()),f&&(v+=`, limited to ${f}`,m=m.splice(0,f)),v+=":",he.log.call(this,v,m),_e.call(this),m})},this.getDocument=()=>{let o=this.collectionName,u=this.docSelectionCriteria,s=[],d={};return this.getDocumentByCriteria=()=>this.lf[o].iterate((f,m)=>{Ee(f,u)&&s.push(f)}).then(()=>{if(!s.length)he.error.call(this,`Could not find Document in "${o}" collection with criteria: ${JSON.stringify(u)}`);else return d=s[0],he.log.call(this,`Got Document with ${JSON.stringify(u)}:`,d),_e.call(this),d}),this.getDocumentByKey=()=>this.lf[o].getItem(u).then(f=>(d=f,d?he.log.call(this,`Got Document with key ${JSON.stringify(u)}:`,d):he.error.call(this,`Could not find Document in "${o}" collection with Key: ${JSON.stringify(u)}`),_e.call(this),d)).catch(f=>{he.error.call(this,`Could not find Document in "${o}" collection with Key: ${JSON.stringify(u)}`),_e.call(this)}),typeof u=="object"?this.getDocumentByCriteria():this.getDocumentByKey()},typeof e=="object"&&!(e instanceof Array)?e.hasOwnProperty("keys")?typeof e.keys!="boolean"&&this.userErrors.push('Property "keys" passed into get() method must be assigned a boolean value (true or false). Not a string or integer.'):this.userErrors.push('Object passed to get() method must contain a "keys" property set to boolean true or false, e.g. { keys: true }'):this.userErrors.push('Data passed to .get() must be an object. Not an array, string, number or boolean. The object must contain a "keys" property set to true or false, e.g. { keys: true }'),this.userErrors.length)return ke.call(this),null;{let o=st.call(this);if(o=="collection")return this.getCollection();if(o=="doc")return this.getDocument()}}var qe={exports:{}},Vt;function rr(){if(Vt)return qe.exports;Vt=1;var e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(e){var o=new Uint8Array(16);qe.exports=function(){return e(o),o}}else{var u=new Array(16);qe.exports=function(){for(var d=0,f;d<16;d++)(d&3)===0&&(f=Math.random()*4294967296),u[d]=f>>>((d&3)<<3)&255;return u}}return qe.exports}var et,Ut;function nr(){if(Ut)return et;Ut=1;for(var e=[],o=0;o<256;++o)e[o]=(o+256).toString(16).substr(1);function u(s,d){var f=d||0,m=e;return[m[s[f++]],m[s[f++]],m[s[f++]],m[s[f++]],"-",m[s[f++]],m[s[f++]],"-",m[s[f++]],m[s[f++]],"-",m[s[f++]],m[s[f++]],"-",m[s[f++]],m[s[f++]],m[s[f++]],m[s[f++]],m[s[f++]],m[s[f++]]].join("")}return et=u,et}var tt,zt;function Vn(){if(zt)return tt;zt=1;var e=rr(),o=nr(),u,s,d=0,f=0;function m(v,E,I){var T=E&&I||0,h=E||[];v=v||{};var B=v.node||u,M=v.clockseq!==void 0?v.clockseq:s;if(B==null||M==null){var q=e();B==null&&(B=u=[q[0]|1,q[1],q[2],q[3],q[4],q[5]]),M==null&&(M=s=(q[6]<<8|q[7])&16383)}var K=v.msecs!==void 0?v.msecs:new Date().getTime(),P=v.nsecs!==void 0?v.nsecs:f+1,X=K-d+(P-f)/1e4;if(X<0&&v.clockseq===void 0&&(M=M+1&16383),(X<0||K>d)&&v.nsecs===void 0&&(P=0),P>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=K,f=P,s=M,K+=122192928e5;var $=((K&268435455)*1e4+P)%4294967296;h[T++]=$>>>24&255,h[T++]=$>>>16&255,h[T++]=$>>>8&255,h[T++]=$&255;var le=K/4294967296*1e4&268435455;h[T++]=le>>>8&255,h[T++]=le&255,h[T++]=le>>>24&15|16,h[T++]=le>>>16&255,h[T++]=M>>>8|128,h[T++]=M&255;for(var ee=0;ee<6;++ee)h[T+ee]=B[ee];return E||o(h)}return tt=m,tt}var rt,jt;function Un(){if(jt)return rt;jt=1;var e=rr(),o=nr();function u(s,d,f){var m=d&&f||0;typeof s=="string"&&(d=s==="binary"?new Array(16):null,s=null),s=s||{};var v=s.random||(s.rng||e)();if(v[6]=v[6]&15|64,v[8]=v[8]&63|128,d)for(var E=0;E<16;++E)d[m+E]=v[E];return d||o(v)}return rt=u,rt}var nt,Kt;function zn(){if(Kt)return nt;Kt=1;var e=Vn(),o=Un(),u=o;return u.v1=e,u.v4=o,nt=u,nt}var ot,Qt;function jn(){if(Qt)return ot;Qt=1;var e=zn();return ot={generate:function(){var o=e.v1();return o.substr(14,4)+o.substr(9,4)+o.substr(0,8)+o.substr(19,4)+o.substr(24,o.length)},toBinary16:function(o){return new Buffer(o,"hex")},fromBinary16:function(o){return o.toString("hex")}},ot}var Kn=jn();const Qn=tr(Kn);function me(e,o){return _e.call(this),he.log.call(this,e,o),{success:!0,message:e,data:o}}function ce(e){return _e.call(this),he.error.call(this,e),`Error: ${e}`}function Yn(e,o){if(e?typeof e=="object"&&!(e instanceof Array)||this.userErrors.push("Data passed to .add() must be an object. Not an array, string, number or boolean."):this.userErrors.push('No data specified in add() method. You must use an object, e.g { id: 1, name: "Bill", age: 47 }'),this.userErrors.length)ke.call(this);else{let u=this.collectionName;return new Promise((s,d)=>{let f=null;return o?f=o:f=Qn.generate(),this.lf[u].setItem(f,e).then(()=>{s(me.call(this,`Document added to "${u}" collection.`,{key:f,data:e}))}).catch(m=>{d(ce.call(this,`Could not add Document to ${u} collection.`))})})}}function Yt(e){for(var o=1;o<arguments.length;o++)for(var u in arguments[o]){var s=arguments[o][u];e[u]=s}return e}function Wn(e){let o=this.collectionName,u=this.docSelectionCriteria;return new Promise((s,d)=>{this.updateDocumentByCriteria=()=>{let f=[];this.lf[o].iterate((m,v)=>{if(Ee(m,u)){let E=Yt(m,e);f.push({key:v,newDocument:E})}}).then(()=>{f.length||d(ce.call(this,`No Documents found in ${o} Collection with criteria ${JSON.stringify(u)}.`)),f.length>1&&he.warn.call(this,`Multiple documents (${f.length}) with ${JSON.stringify(u)} found for updating.`)}).then(()=>{f.forEach((m,v)=>{this.lf[o].setItem(m.key,m.newDocument).then(E=>{v===f.length-1&&s(me.call(this,`${f.length} Document${f.length>1?"s":""} in "${o}" collection with ${JSON.stringify(u)} updated.`,e))}).catch(E=>{d(ce.call(this,`Could not update ${f.length} Documents in ${o} Collection.`))})})})},this.updateDocumentByKey=()=>{let f={};this.lf[o].getItem(u).then(m=>{f=Yt(m,e),this.lf[o].setItem(u,f),s(me.call(this,`Document in "${o}" collection with key ${JSON.stringify(u)} updated.`,f))}).catch(m=>{d(ce.call(this,`No Document found in "${o}" collection with key ${JSON.stringify(u)}`))})},e?typeof e=="object"&&!(e instanceof Array)||this.userErrors.push("Data passed to .update() must be an object. Not an array, string, number or boolean."):this.userErrors.push('No update object provided to update() method. Use an object e.g. { name: "William" }'),this.userErrors.length?ke.call(this):typeof u=="object"?this.updateDocumentByCriteria():this.updateDocumentByKey()})}function Jn(e,o={keys:!1}){let u=this.collectionName,s=this.docSelectionCriteria,d=st.call(this);return new Promise((f,m)=>{if(this.setCollection=()=>{this.lf[u].clear().then(()=>{if(!o.keys)e.forEach(v=>{this.add(v)}),f(me.call(this,`Collection "${u}" set with ${e.length} Documents.`,e));else{console.log("keys provided");let v=0;e.forEach(E=>{E.hasOwnProperty("_key")||v++}),v?m(ce.call(this,"Documents provided to .set() in an array must each have a _key property set to a string.")):(e.forEach(E=>{let I=E._key;delete E._key,this.add(E,I)}),f(me.call(this,`Collection "${u}" set with ${e.length} Documents.`,e)))}}).catch(v=>{m(ce.call(this,`Could not set ${u} Collection with data ${JSON.stringify(e)}.`))})},this.setDocument=()=>(this.setDocumentByCriteria=()=>{let v=[];this.lf[u].iterate((E,I)=>{Ee(E,s)&&v.push({key:I,newDocument:e})}).then(()=>{v.length||m(ce.call(this,`No Documents found in ${u} Collection with criteria ${JSON.stringify(s)}.`)),v.length>1&&he.warn.call(this,`Multiple documents (${v.length}) with ${JSON.stringify(s)} found for setting.`)}).then(()=>{v.forEach((E,I)=>{this.lf[u].setItem(E.key,E.newDocument).then(T=>{I===v.length-1&&f(me.call(this,`${v.length} Document${v.length>1?"s":""} in "${u}" collection with ${JSON.stringify(s)} was set.`,e))}).catch(T=>{m(ce.call(this,`Could not set ${v.length} Documents in ${u} Collection.`))})})})},this.setDocumentByKey=()=>{this.lf[u].setItem(s,e).then(v=>{f(me.call(this,`Document in "${u}" collection with key ${JSON.stringify(s)} was set.`,e))}).catch(v=>{m(ce.call(this,`Document in "${u}" collection with key ${JSON.stringify(s)} could not be set.`))})},typeof s=="object"?this.setDocumentByCriteria():this.setDocumentByKey()),e?d==="doc"?typeof e=="object"&&!(e instanceof Array)||this.userErrors.push("Data passed to .set() must be an object. Not an array, string, number or boolean."):d==="collection"&&(typeof e=="object"&&e instanceof Array||this.userErrors.push("Data passed to .set() must be an array of objects. Not an object, string, number or boolean.")):this.userErrors.push('No new Document object provided to set() method. Use an object e.g. { id: 1, name: "Bill", age: 47 }'),this.userErrors.length)ke.call(this);else{if(d=="collection")return this.setCollection();if(d=="doc")return this.setDocument()}})}function Hn(){return new Promise((e,o)=>{if(this.deleteDatabase=()=>{let u=this.dbName;indexedDB.deleteDatabase(u),e(me.call(this,`Database "${u}" deleted.`,{database:u}))},this.deleteCollection=()=>{let u=this.dbName,s=this.collectionName;this.addToDeleteCollectionQueue=d=>{this.deleteCollectionQueue.queue.push(d),this.runDeleteCollectionQueue()},this.runDeleteCollectionQueue=()=>{this.deleteCollectionQueue.running==!1&&(this.deleteCollectionQueue.running=!0,this.deleteNextCollectionFromQueue())},this.deleteNextCollectionFromQueue=()=>{if(this.deleteCollectionQueue.queue.length){let d=this.deleteCollectionQueue.queue[0];this.deleteCollectionQueue.queue.shift(),this.lf[d].dropInstance({name:u,storeName:d}).then(()=>{this.deleteNextCollectionFromQueue(),e(me.call(this,`Collection "${d}" deleted.`,{collection:d}))}).catch(f=>{o(f.call(this,`Collection "${d}" could not be deleted.`))})}else this.deleteCollectionQueue.running=!1},this.addToDeleteCollectionQueue(s)},this.deleteDocument=()=>{let u=this.collectionName,s=this.docSelectionCriteria;return this.deleteDocumentByCriteria=()=>{let d=[];this.lf[u].iterate((f,m)=>{Ee(f,s)&&d.push(m)}).then(()=>{d.length||o(ce.call(this,`No Documents found in "${u}" Collection with criteria ${JSON.stringify(s)}. No documents deleted.`)),d.length>1&&he.warn.call(this,`Multiple documents (${d.length}) with ${JSON.stringify(s)} found.`)}).then(()=>{d.forEach((f,m)=>{this.lf[u].removeItem(f).then(()=>{m===d.length-1&&e(me.call(this,`${d.length} Document${d.length>1?"s":""} with ${JSON.stringify(s)} deleted.`,{keys:d}))}).catch(v=>{o(ce.call(this,`Could not delete ${d.length} Documents in ${u} Collection.`))})})})},this.deleteDocumentByKey=()=>{this.lf[u].getItem(s).then(d=>{d?this.lf[u].removeItem(s).then(()=>{e(me.call(this,`Document with key ${JSON.stringify(s)} deleted.`,{key:s}))}).catch(function(f){o(ce.call(this,`No Document found in "${u}" Collection with key ${JSON.stringify(s)}. No document was deleted.`))}):o(ce.call(this,`No Document found in "${u}" Collection with key ${JSON.stringify(s)}. No document was deleted.`))})},typeof s=="object"?this.deleteDocumentByCriteria():this.deleteDocumentByKey()},this.userErrors.length)ke.call(this);else{let u=st.call(this);if(u=="db")return this.deleteDatabase();if(u=="collection")return this.deleteCollection();if(u=="doc")return this.deleteDocument()}})}class Zn{constructor(o){this.dbName=o,this.lf={},this.collectionName=null,this.orderByProperty=null,this.orderByDirection=null,this.limitBy=null,this.docSelectionCriteria=null,this.deleteCollectionQueue={queue:[],running:!1},this.config={debug:!0},this.userErrors=[],this.collection=$n.bind(this),this.doc=Fn.bind(this),this.orderBy=qn.bind(this),this.limit=Pn.bind(this),this.get=Ln.bind(this),this.add=Yn.bind(this),this.update=Wn.bind(this),this.set=Jn.bind(this),this.delete=Hn.bind(this)}}let it=null;function uo(){return it||(it=new Zn("lista-compra")),it}export{oo as Q,ao as a,lo as b,to as c,Xt as d,uo as e,Rn as f,Ht as g,Zt as h,no as i,ro as r,io as u};
